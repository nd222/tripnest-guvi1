<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Museum Ticket Booking Chatbot</title>
    <link rel="stylesheet" href="Meghalayacss.css">
    <link href="https://db.onlinewebfonts.com/c/6bff5f8f85a7385fbdc21a8f724dd8ac?family=Rajasthan+Regular"
        rel="stylesheet">
    <style>
        .goog-te-gadget .goog-te-combo {
            margin: 4px 0;
            padding: 5px;
            border-radius: 20px;
        }

        #timing {
            margin-bottom: 15px;
        }
        .dropbtn {
            background-color: #04AA6D;
            color: white;
            padding: 10px;
            font-size: 16px;
            margin-bottom: 10px;
            border: none;
        }

        .dropdown {
            position: relative;
            display: inline-block;
        }

        .dropdown-content {
            display: none;
            position: absolute;
            background-color: #f1f1f1;
            min-width: 160px;
            box-shadow: 0px 8px 16px 0px rgba(0, 0, 0, 0.2);
            z-index: 1;
        }

        .dropdown-content a {
            color: black;
            min-width: 200px;
            padding: 0px;
            font-size: 15px;
            font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
            text-decoration: none;
            display: block;
        }


        .dropdown:hover .dropdown-content {
            display: block;
        }

    </style>
</head>

<body>
    <div id="bg-img">
        <header>
            <div-1>
                <img id="logo" src="photos/logo1.png" alt="">
                <h1>ChatBot-Ticketing System</h1>
            </div-1>
            <div id="google_element"></div>
        </header>

        <div id="top">
            <div class="chat-container">
                <div id="chat-box" class="chat-box">
                    <div class="message bot">Hello! Welcome to our museum. What is your name?</div>
                </div>
                <div id="nameInputContainer">
                    <input type="text" id="user-input" placeholder="Enter your name..." autofocus>
                    <button onclick="sendMessage()">Send</button>
                </div>

                <div id="cityPrompt" class="hidden">
                    <label for="citySelect">Select City:</label>
                    <select id="citySelect" onchange="botReply()">
                        <option value="">--Select a City--</option>
                        <option value="Shillong">Shillong</option>
                        <option value="Tura">Tura</option>
                        <option value="Jowai">Jowai</option>
                    </select>
                </div>

                <div id="museumPrompt" class="hidden">
                    <label for="museumSelect">Select Museum:</label>
                    <select id="museumSelect" onchange="botReply()">
                        <!-- Options will be populated dynamically -->
                    </select>
                </div>

                <div id="visitorTypePrompt" class="hidden">
                    <label for="visitorTypeSelect">Are you an Indian or Foreigner?</label>
                    <select id="visitorTypeSelect" onchange="botReply()">
                        <option value="">--Select--</option>
                        <option value="indian">Indian</option>
                        <option value="foreigner">Foreigner</option>
                    </select>
                </div>

                <div id="ticketPrompt" class="hidden">
                    <label for="ticketSelect">Number of Tickets:</label>
                    <select id="ticketSelect" onchange="botReply()">
                        <option value="">--Select Number of Tickets--</option>
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                        <option value="6">6</option>
                        <option value="7">7</option>
                        <option value="8">8</option>
                        <option value="9">9</option>
                        <option value="10">10</option>
                    </select>
                </div>

                <div id="datePrompt" class="hidden">
                    <label for="dateSelect">Select Date:</label>
                    <input type="date" id="dateSelect" onchange="botReply()">
                </div>

                <div id="timePrompt" class="hidden">
                    <label for="timeSelect">Select Time Slot:</label>
                    <select id="timeSelect" onchange="botReply()">
                        <option value="">--Select Time Slot--</option>
                        <option value="09:00">09:00 AM</option>
                        <option value="11:00">11:00 AM</option>
                        <option value="14:00">02:00 PM</option>
                    </select>
                </div>

                <div id="priceDisplay" class="hidden">
                    <div id="priceMessage"></div>
                </div>

                <div id="paymentButtonContainer" class="hidden">
                    <button id="payButton" onclick="completePayment()">Complete Payment</button>
                </div>

                <div id="confirmationMessage" class="hidden">
                    <div class="message bot">Your ticket is booked. Thanks for visiting us!</div>
                    <a id='download' href="ticket.html">Download your ticket</a>

                </div>
            </div>

            <div class="right-text">
                <h1>MEGHALAYA</h1>
                <p>
                    Meghalaya, a state in northeastern India, is known for its stunning landscapes, diverse cultures,
                    and rich heritage. The state is famous for its scenic beauty, including lush green hills, cascading
                    waterfalls, and vibrant festivals. Shillong, the capital city, is a cultural and economic hub with
                    charming markets and historical sites. Meghalaya's attractions include its famous living root
                    bridges, caves, and cultural museums.
                    <br><br>
                    Meghalaya has predominantly an agrarian economy with a significant commercial forestry industry. The
                    important crops are potatoes, rice, maize, pineapples, bananas, papayas, and spices. The service
                    sector is made up of real estate and insurance companies. Meghalaya's gross state domestic product
                    for 2012 was estimated at ‚Çπ16,173 crore (US$1.9 billion) in current prices.
                    <br><br>
                    Meghalaya, alongside neighbouring Indian states, has been of archaeological interest. People have
                    lived in Meghalaya since the Neolithic period. Neolithic sites discovered so far are located in
                    areas of high elevation in Khasi Hills, Garo Hills and in neighbouring states, where Neolithic style
                    jhum or shifting cultivation is practised even today.
                </p>
            </div>
        </div>
    </div>
    <div class="bottom">
        <div id="first">
            <div class="text-content">
                <h1 style="text-decoration: underline;">State Museum of Meghalaya: Shillong</h1>
                <p id="museum-p">The State Museum of Meghalaya in Shillong showcases the diverse cultural heritage of
                    Meghalaya. It features a variety of artifacts, including traditional clothing, historical objects,
                    and artworks that reflect the rich history and culture of the state.
                    
                </p>
                <h3 style="text-decoration: underline;">Contact Number:</h3>
                <p id="number">0364 250 1505</p>
                <div class="dropdown">
                    <button class="dropbtn">Timings</button>
                    <div class="dropdown-content">
                        <a href="#">Monday: CLOSED!</a>
                        <a href="#">Tuesday: 10:00 - 17:30</a>
                        <a href="#">Wednesday: 10:00 - 17:30</a>
                        <a href="#">Thursday: 10:00 - 17:30</a>
                        <a href="#">Friday: 10:00 - 17:30</a>
                        <a href="#">Satuday: 10:30 - 17:30</a>
                        <a href="#">Sunday: 10:30 - 17:30</a>
                    </div>
                </div>
                <br>
                <a href="https://maps.app.goo.gl/1eRJ4QLFvMHBMHSU8">üìç Directions</a>
            </div>
            <div class="image-content">
                <img id="museum-img" src="photos/State_Museum_Meghalaya.jpg" alt="State Museum of Meghalaya">
            </div>
        </div>
    </div>

    <div class="bottom">
        <div id="first">
            <div class="text-content">
                <h1 style="text-decoration: underline;">Don Bosco Centre for Indigenous Cultures: Shillong</h1>
                <p id="museum-p">The Don Bosco Centre for Indigenous Cultures is dedicated to preserving and promoting
                    the rich cultural heritage of the indigenous tribes of Meghalaya. The center exhibits various
                    artifacts, traditional crafts, and cultural objects related to the indigenous cultures of the
                    region.</p>
                <h3 style="text-decoration: underline;">Contact Number:</h3>
                <p id="number">0364 250 2901</p>
                <div class="dropdown">
                    <button class="dropbtn">Timings</button>
                    <div class="dropdown-content">
                        <a href="#">Monday: CLOSED!</a>
                        <a href="#">Tuesday: 10:00 - 17:30</a>
                        <a href="#">Wednesday: 10:00 - 17:30</a>
                        <a href="#">Thursday: 10:00 - 17:30</a>
                        <a href="#">Friday: 10:00 - 17:30</a>
                        <a href="#">Satuday: 10:30 - 17:30</a>
                        <a href="#">Sunday: 10:30 - 17:30</a>
                    </div>
                </div>
                <br>
                <a href="https://maps.app.goo.gl/7oGfr4muyLDKxg5eA">üìç Directions</a>
            </div>
            <div class="image-content">
                <img class="museum-img" src="photos/Don_Bosco_Centre.jpg"
                    alt="Don Bosco Centre for Indigenous Cultures">
            </div>
        </div>
    </div>

    <div class="bottom">
        <div id="first">
            <div class="text-content">
                <h1 style="text-decoration: underline;">Wards Lake: Shillong</h1>
                <p id="museum-p">Wards Lake is a picturesque lake located in Shillong. It is a popular tourist
                    destination known for its serene beauty and well-maintained gardens. The lake provides a glimpse
                    into the natural beauty of Meghalaya and is a great spot for relaxation and leisure.</p>
                <h3 style="text-decoration: underline;">Contact Number:</h3>
                <p id="number">0364 250 1894</p>
                <div class="dropdown">
                    <button class="dropbtn">Timings</button>
                    <div class="dropdown-content">
                        <a href="#">Monday: CLOSED!</a>
                        <a href="#">Tuesday: 10:00 - 17:30</a>
                        <a href="#">Wednesday: 10:00 - 17:30</a>
                        <a href="#">Thursday: 10:00 - 17:30</a>
                        <a href="#">Friday: 10:00 - 17:30</a>
                        <a href="#">Satuday: 10:30 - 17:30</a>
                        <a href="#">Sunday: 10:30 - 17:30</a>
                    </div>
                </div>
                <br>
                <a href="https://maps.app.goo.gl/2i7ePyke8oMKpabNA">üìç Directions</a>
            </div>
            <div class="image-content">
                <img class="museum-img" src="photos/Wards_Lake.jpg" alt="Wards Lake">
            </div>
        </div>
    </div>

    <script>
        function loadGoogleTranslate() {
            new google.translate.TranslateElement({ pageLanguage: 'en' }, 'google_element');
        }
    </script>
    <script src="https://translate.google.com/translate_a/element.js?cb=loadGoogleTranslate"></script>

    <script>
        let step = 0;
        let userName = '';
        let selectedCity = '';
        let selectedMuseum = '';
        let visitorType = '';
        let numberOfTickets = 0;
        let selectedDate = '';
        let selectedTime = '';
        const ticketPrices = { indian: 100, foreigner: 500 };

        function sendMessage() {
            const userInput = document.getElementById("user-input").value;
            if (userInput.trim() === "") return;

            appendMessage(userInput, 'user');
            document.getElementById("user-input").value = '';

            if (step === 0) {
                // Hide the name input after entering the name
                document.getElementById("nameInputContainer").style.display = "none";
            }

            setTimeout(() => {
                botReply(userInput);
            }, 500);
        }

        function appendMessage(text, sender) {
            const chatBox = document.getElementById("chat-box");
            const message = document.createElement("div");
            message.className = `message ${sender}`;
            message.innerText = text;
            chatBox.appendChild(message);
            chatBox.scrollTop = chatBox.scrollHeight;
        }

        function botReply(userInput = '') {
            let botMessage = '';

            switch (step) {
                case 0:
                    userName = userInput;
                    botMessage = `Nice to meet you, ${userName}. Which city would you like to book tickets for?`;
                    step++;
                    showElement('cityPrompt');
                    break;

                case 1:
                    selectedCity = document.getElementById('citySelect').value;
                    if (selectedCity) {
                        botMessage = `You've selected ${selectedCity.charAt(0).toUpperCase() + selectedCity.slice(1)}. Which museum would you like to visit?`;
                        step++;
                        updateMuseums();
                        showElement('museumPrompt');
                    }
                    break;

                case 2:
                    selectedMuseum = document.getElementById('museumSelect').value;
                    if (selectedMuseum) {
                        botMessage = `You've chosen ${selectedMuseum.replace(/_/g, ' ').toUpperCase()}. Are you an Indian or Foreigner?`;
                        step++;
                        showElement('visitorTypePrompt');
                    }
                    break;

                case 3:
                    visitorType = document.getElementById('visitorTypeSelect').value;
                    if (visitorType) {
                        botMessage = `You've selected ${visitorType.charAt(0).toUpperCase() + visitorType.slice(1)}. How many tickets would you like to book?`;
                        step++;
                        showElement('ticketPrompt');
                    }
                    break;

                case 4:
                    numberOfTickets = parseInt(document.getElementById('ticketSelect').value, 10);
                    if (!isNaN(numberOfTickets) && numberOfTickets > 0) {
                        botMessage = `You've chosen ${numberOfTickets} tickets. Please select a date.`;
                        step++;
                        showElement('datePrompt');
                    }
                    break;

                case 5:
                    selectedDate = document.getElementById('dateSelect').value;
                    if (selectedDate) {
                        botMessage = `You've selected ${selectedDate}. Please choose a time slot.`;
                        step++;
                        showElement('timePrompt');
                    }
                    break;

                case 6:
                    selectedTime = document.getElementById('timeSelect').value;
                    if (selectedTime) {
                        calculatePrice();
                        botMessage = `You've chosen ${selectedTime}. The total price is ‚Çπ${ticketPrices[visitorType] * numberOfTickets}. Would you like to proceed with the payment?`;
                        step++;
                        showElement('paymentButtonContainer');
                    }
                    break;

                case 7:
                    botMessage = `Thank you, ${userName}! Your booking is confirmed.`;
                    step++;
                    document.getElementById('confirmationMessage').classList.remove('hidden');
                    break;

                default:
                    botMessage = "Your ticket has already been booked. Thank you!";
            }

            if (botMessage) {
                appendMessage(botMessage, 'bot');
            }
        }

        function updateMuseums() {
            const museumSelect = document.getElementById('museumSelect');
            museumSelect.innerHTML = ''; // Clear previous options

            const museums = {
                Shillong: ['--Select a Museum--', 'State Museum of Meghalaya', 'Don Bosco Centre for Indigenous Cultures', 'Wards Lake'],
                Tura: ['--Select a Museum--', 'Tura Museum'],
                Jowai: ['--Select a Museum--', 'Museum of the Indigenous Culture']
            };

            museums[selectedCity].forEach(museum => {
                const option = document.createElement('option');
                option.value = museum.toLowerCase().replace(/ /g, '_');
                option.textContent = museum;
                museumSelect.appendChild(option);
            });
        }

        function calculatePrice() {
            const totalPrice = ticketPrices[visitorType] * numberOfTickets;
            const priceMessage = `The total price is ‚Çπ${totalPrice}.`;
            document.getElementById('priceMessage').innerText = priceMessage;
            showElement('priceDisplay');
        }

        function completePayment() {
            appendMessage("Processing your payment...", 'bot');
            setTimeout(() => {
                document.getElementById('paymentButtonContainer').classList.add('hidden');
                botReply();
            }, 1500); // Simulating payment process delay
        }

        function showElement(elementId) {
            document.getElementById(elementId).classList.remove('hidden');
        }


    </script>


    <script>
        function saveData() {
            const userData = {
                userName: document.getElementById('userName').value,
                selectedCity: document.getElementById('selectedCity').value,
                selectedMuseum: document.getElementById('selectedMuseum').value,
                visitorType: document.getElementById('visitorType').value,
                numberOfTickets: document.getElementById('numberOfTickets').value,
                selectedDate: document.getElementById('selectedDate').value,
                selectedTime: document.getElementById('selectedTime').value
            };

            localStorage.setItem('userData', JSON.stringify(userData));
            window.location.href = 'ticket.html'; // Redirect to ticket page
        }

        function saveData() {
            const userData = {
                userName: document.getElementById('userName').value,
                selectedCity: document.getElementById('selectedCity').value,
                selectedMuseum: document.getElementById('selectedMuseum').value,
                visitorType: document.getElementById('visitorType').value,
                numberOfTickets: document.getElementById('numberOfTickets').value,
                selectedDate: document.getElementById('selectedDate').value,
                selectedTime: document.getElementById('selectedTime').value
            };

            console.log(userData);  // Log the data to the console for debugging

            localStorage.setItem('userData', JSON.stringify(userData));
            window.location.href = 'ticket.html';  // Redirect to ticket page
        }

        function completePayment() {
            const userData = {
                userName,
                selectedCity,
                selectedMuseum,
                visitorType,
                numberOfTickets,
                selectedDate,
                selectedTime
            };

            // Save data to localStorage
            localStorage.setItem('userData', JSON.stringify(userData));

            // Simulating payment and redirect to ticket.html
            appendMessage("Processing your payment...", 'bot');
            setTimeout(() => {
                window.location.href = 'ticket.html'; // Redirect to ticket.html
            }, 1500);
        }
    </script>
</body>

</html>